
<div>

    <ion-header-bar no-tap-scroll="true"  align-title="center" class="bar-dark">
        <div class="buttons">
            <button ng-disabled='testBtnDisabled'  class="button button-balanced" ng-click="chkAll()">
                <span>{{ 'module.diagnosis.checkAll' | translate }}/取消</span>
            </button>
        </div>
        <div class="h1 title login-title"> </div>
        <div class="buttons" style="right: 10px">
            <button ng-disabled='testBtnDisabled'  class="button button-balanced" ng-click="startTestSelectedItems()" style="width: 65px;">
                <span class="ion-play" style="font-size: 28px;margin: 0 10px;"></span>
            </button>
        </div>
    </ion-header-bar>
    <ion-view>
        <ion-content overflow-scroll="true" id="nff-container">
                <ion-list rj-close-back-drop  ng-repeat='testType in testItems'>
                    <div style="font-size: 19px;padding-left: 10px;"><h2>{{'module.diagnosis.' + testType.category | translate}}</h2></div>
                    <div ng-repeat='itemPort in testType["ports"]'>
                        <div  style="margin: 10px;" id="{{item.item+item.portNum}}" ng-repeat='item in itemPort.items' ng-class="{'success':item.checkValue && item.result=='success','fail':item.checkValue && (item.result=='fail' || item.result=='timeOut' ||item.result=='offline'),'a_demo_one':!item.checkValue || (item.checkValue && item.progress != 'testing' && item.result!='success' && item.result!='fail' && item.result!='timeOut' && item.result!='offline'),'a_demo_two':(item.checkValue && testingItems=='prepare') || item.progress=='testing' ||(item.checkValue && testingItems=='finished' && item.result!='success' && item.result!='fail' && item.result!='timeOut' && item.result!='offline') }">
                            <ion-item ng-click="chk(item,testingItems)" class="item-avatar"  style="border: none;margin: 1px;background-color: transparent"}">
                                <img ng-src="assets/images/{{item.item}}.jpg">
                                <!--span class="rj-sm-red-icon" ng-if="item.checkValue"><i class="ion-ios-checkmark"></i></span>
                                <span class="rj-sm-red-icon" ng-if="!item.checkValue"><i class="ion-ios-circle-outline"></i></span-->
                                <h2 style="margin-left: -52px;">{{'module.diagnosis.' + item.item | translate}}{{item.portNum}}</h2>
                                <p class="rj-list-p" style="color:white;font-size: 18px;margin-left: -52px;">{{'module.diagnosis.' + item.result | translate}}</p>
                                <span ng-if="item.checkValue" class="rj-push-right-ok ion-checkmark-circled"></span>
                                <span ng-if="!item.checkValue" class="rj-push-right-ok1 ion-ios-circle-outline"></span>
                                <div ng-if="item.checkValue && testingItems=='finished' && (item.comment || item.suggestion || !item.autoCfm)" class="rj-push-right1" ng-click="openOrCloseDiv(item,$event);" >
                                    <span ng-if="!item.checkOpen" class="rj-push-right ion-android-arrow-dropdown" style="font-size: 36px;"></span>
                                    <span ng-if="item.checkOpen"  class="rj-push-right ion-android-arrow-dropup"   style="font-size: 36px;"></span>
                                </div>
                            </ion-item>
                            <div class="list card nfffade wrap" ng-class="{'card-back-color':item.progress!='testing'}"  ng-show="item.checkValue && (item.comment || item.suggestion || !item.autoCfm) && (item.checkOpen || testingItems=='testing')" style="margin:0 10px 10px 10px;">
                                <div class="item item-body" ng-class="{'card-back-color':item.progress!='testing'}" ng-if="(item.comment && testingItems=='finished')||(item.item=='rx'||item.item=='tx'||item.item=='wifi')">
                                    <h2 class="dm-nowrap-2" style="margin: 0px;text-align: left">{{ 'module.diagnosis.comment' | translate }}:</h2>
                                    <p style="text-align: center"><span ng-model="item.comment" ng-bind-html="item.comment | convertToHtmlElem |trustHtml"></span></p>
                                </div>
                                <div class="item item-body" ng-class="{'card-back-color':item.progress!='testing'}" ng-if="item.suggestion">
                                    <h2 style="text-align: left" class="dm-nowrap-2" style="margin: 0px;">操作建议:</h2>
                                    <div style="text-align: center;padding: 10px;" ng-if="item.showCheckbox" ng-click="checkSuggestion(item)"><input type="checkbox" ng-model="item.shine"></div>
                                    <p ng-class="{'card-back-color':item.progress!='testing'}" style="text-align: center" class="col group-cell-select" ng-if="item.showCheckbox" style="white-space: normal">{{'module.diagnosis.' + item.suggestion | translate}}{{item.suggestionPrefix}}</p>
                                    <p ng-class="{'card-back-color':item.progress!='testing'}" style="text-align: center" class="col group-cell-select" ng-if="!item.showCheckbox" style="white-space: normal">{{'module.diagnosis.' + item.suggestion | translate}}{{item.suggestionPrefix}}</p>

                                </div>
                                <div class="item item-body" ng-class="{'card-back-color':item.progress!='testing'}" ng-if="item.suggestion" style="text-align: center">
                                    <div>
                                        <md-button ng-disabled="item.btnStartDisabled" class="md-fab md-mini"   ng-click="startTestCurrentItem()" style="width: 80px;border-radius: 0;">
                                            <span >点击继续</span>
                                        </md-button>
                                    </div>
                                </div>
                                <div class="item item-body" ng-class="{'card-back-color':item.progress!='testing'}" ng-if="!item.autoCfm">
                                    <h2 style="text-align: left" class="dm-nowrap-2" style="margin: 0px;">结果确认:</h2>
                                    <div class="row" ng-if="!item.autoCfm" style="margin-left:0">
                                        <div class="col group-cell-select" ng-class="{'card-back-color':item.progress!='testing'}">
                                            <md-button ng-disabled="item.btnDisabled" ng-click="confirmResult(item,'timeOut')"  class="md-fab md-mini"  title="{{ 'module.diagnosis.timeOut' | translate }}">
                                                <span>{{ 'module.diagnosis.timeOut' | translate }}</span>
                                            </md-button>
                                        </div>
                                        <div class="col group-cell-select" ng-class="{'card-back-color':item.progress!='testing'}">
                                            <md-button ng-disabled="item.btnDisabled" ng-click="confirmResult(item,'success')"  class="md-fab md-mini"   title="{{ 'module.diagnosis.success' | translate }}">
                                                <span>{{ 'module.diagnosis.success' | translate }}</span></md-button>
                                        </div>
                                        <div class="col group-cell-select" ng-class="{'card-back-color':item.progress!='testing'}">
                                            <md-button ng-disabled="item.btnDisabled" ng-click="confirmResult(item,'fail')"  class="md-fab md-mini"  title="{{ 'module.diagnosis.failed' | translate }}">
                                                <span>{{ 'module.diagnosis.failed' | translate }}</span></md-button >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-list>
            <div style="width: 100%;height: 300px;" ng-if="testingItems=='testing'"></div>
                <div class="blank-h12"></div>
                <div class="blank-h12"></div>
                <div class="blank-h12"></div>
                <div class="blank-h12"></div>

        </ion-content>
    </ion-view>

</div>
